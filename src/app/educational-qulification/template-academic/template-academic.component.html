<div class="container">
    <div class="row">
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">

            <div class="col-12 col-sm-12 col-md-5 col-lg-5 col-xl-5">
                <h5>Tertiary Qualification</h5>
            </div>

            <!-- field Upload certificates-->
            <div class="col-12 col-sm-12 col-md-7 col-lg-12 col-xl-12 certificate">

                <form #form="ngForm" (ngSubmit)="saveCertificatesAcademic(certiAcademic);" name="uploadCertificate">

                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 row">

                        <div class="form-group-inline row">
                            <label class="col-sm-6" for="certificateName"
                                style="padding-top: 3px; margin-top: 7px;">Upload
                                Certificates <small>(pdf only)</small></label>

                            <input type="file" class="form-control input-type form-control-sm col-sm-6"
                                style="margin-bottom: 7px;margin-top: 7px;padding-bottom: 30px;padding-top: 3px;padding-left: 4px;"
                                id="certificateName" name="certificateName" [(ngModel)]="certiAcademic.certificateName"
                                #certificateName="ngModel" accept="application/pdf" (change)="readFile($event)"
                                (change)="selectFile($event)">
                        </div>

                        <div class="row col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2 text-right py-2" id="button-group">
                            <button *ngIf="certificate" type="submit" class="btn btn-sm  btn-main">+</button>
                        </div>
                    </div>
                </form>
            </div>


            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <div class="form">

                    <!-- Educational Qualification form Academic-->
                    <form #form="ngForm" (ngSubmit)="saveAcademic(dataAcademic);"
                        name="educationalQualificationacademic">
                        <div class="row">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                <div class="row">
                                    <!-- field  Qualification Type-->
                                    <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                        <div class="form-group">
                                            <label for="qualificationType"> Qualification Type*</label>

                                            <input class="form-control input-type form-control-sm"
                                                list="qualificationtypes" name="qualificationtype"
                                                id="qualificationtype" [(ngModel)]="qualificationTypeName"
                                                #qualificationtype="ngModel"
                                                (change)="setAcademicQualificationIdByName($event)" required>

                                            <datalist id="qualificationtypes">
                                                <option *ngFor="let q of qualification; let i = index"
                                                    (change)="setAcademicQualificationIdByName($event)"
                                                    [value]="q.qualificationType">
                                                    {{q.qualificationType}}
                                            </datalist>
                                        </div>
                                    </div>

                                    <!-- field  Qualification Name-->
                                    <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                        <div class="form-group">
                                            <label for="qualificationName"> Qualification Name*</label>

                                            <input type="text" class="form-control input-type form-control-sm"
                                                id="qualificationName" name="qualificationName"
                                                [(ngModel)]="dataAcademic.qualificationName" required
                                                #qualificationName="ngModel">
                                        </div>
                                    </div>

                                    <!-- field Duration-->
                                    <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                        <div class="form-group ">
                                            <label for="duration">Duration (month)*</label>

                                            <input type="text" class="form-control input-type form-control-sm"
                                                id="duration" name="duration" [(ngModel)]="dataAcademic.duration"
                                                required #duration="ngModel">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- field Institution-->
                                    <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                        <div class="form-group">
                                            <label for="institution">Institution*</label>

                                            <select class="form-control input-type form-control-sm" id="institution"
                                                name="institution" [(ngModel)]="dataAcademic.institution.id" required>
                                                <option selected disabled>---------Select---------</option>
                                                <option *ngFor="let i of institution" [value]="i.id">{{i.institution}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- field Effective Date-->
                                    <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                        <div class="form-group ">
                                            <label for="effectiveDate">Effective Date*</label>

                                            <input type="date" class="form-control input-type form-control-sm"
                                                id="effectiveDate" name="effectiveDate"
                                                [(ngModel)]="dataAcademic.effectiveDate" required
                                                #effectiveDate="ngModel">
                                        </div>
                                    </div>

                                    <!-- button - plus enter data-->
                                    <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4" style="padding: 10px;">
                                        <div class="form-group">
                                            <button type="submit" class="btn btn-sm  btn-main"
                                                style="padding: 1px;">Save & add another
                                                qualification</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="qualification-list row">
                            <div class="qualification-table col-sm-9">
                                <table class="table table-bordered table-fixed" id=acQualificationTable>
                                    <thead>
                                        <tr>
                                            <th scope="col">qualification Type</th>
                                            <th scope="col">qualification Name</th>
                                            <th scope="col">Duration</th>
                                            <th scope="col">Institution</th>
                                            <th scope="col">effective Date</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let a of eduAcademic; let i = index">
                                            <td>{{a.academicQualificationTypes.qualificationType}}</td>
                                            <td>{{a.qualificationName}}</td>
                                            <td>{{a.duration}}</td>
                                            <td>{{a.institution.institution}}</td>
                                            <td>{{a.effectiveDate}}</td>
                                            <td>
                                                <div class="row " id="button-group">
                                                    <div class="text-right py-2">
                                                        <button type="button" (click)="openEdit(editForm, a.id)"> <span
                                                                class="fa fa-edit"></span></button>

                                                        <!-- Edit form popup-->
                                                        <ng-template #editForm>
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h4 class="modal-title pull-left">Edit record</h4>
                                                                    <button type="button" class="close pull-right"
                                                                        aria-label="Close" (click)="modalRef.hide()">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div>
                                                                        <div class="row">
                                                                            <!-- field  Qualification Type-->
                                                                            <div class="form-group col-sm-4">
                                                                                <label for="qualificationType"
                                                                                    class="col-sm-6">
                                                                                    Qualification Type*</label>


                                                                                <input
                                                                                    class="form-control input-type form-control-sm"
                                                                                    list="qualificationtypes"
                                                                                    name="qualificationtype"
                                                                                    id="qualificationtype"
                                                                                    [(ngModel)]="qualificationTypeName"
                                                                                    #qualificationtype="ngModel"
                                                                                    (change)="setAcademicQualificationIdByName($event)"
                                                                                    required>

                                                                                <datalist id="qualificationtypes">
                                                                                    <option
                                                                                        *ngFor="let q of qualification; let i = index"
                                                                                        (change)="setAcademicQualificationIdByName($event)"
                                                                                        [value]="q.qualificationType">
                                                                                        {{q.qualificationType}}
                                                                                </datalist>

                                                                            </div>

                                                                            <!-- field  Qualification Name-->
                                                                            <div class="form-group col-sm-4">
                                                                                <label for="qualificationName"
                                                                                    class="col-sm-6">
                                                                                    Qualification Name*</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="text"
                                                                                        class="form-control"
                                                                                        id="qualificationName"
                                                                                        name="qualificationName"
                                                                                        [(ngModel)]="editedDataAcademic.qualificationName"
                                                                                        required
                                                                                        #qualificationName="ngModel">
                                                                                </div>
                                                                            </div>

                                                                            <!-- field Duration-->
                                                                            <div class="form-group col-sm-4">
                                                                                <label for="duration"
                                                                                    class="col-sm-6">Duration*</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="text"
                                                                                        class="form-control"
                                                                                        id="duration" name="duration"
                                                                                        [(ngModel)]="editedDataAcademic.duration"
                                                                                        required #duration="ngModel">
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row">
                                                                            <!-- field Institution-->
                                                                            <div class="form-group col-sm-4">
                                                                                <label for="institution"
                                                                                    class="col-sm-6">Institution*</label>
                                                                                <div class="col-sm-12"
                                                                                    style="padding-right: 1px;">
                                                                                    <select class="form-control"
                                                                                        id="institution"
                                                                                        name="institution"
                                                                                        [(ngModel)]="editedDataAcademic.institution.id"
                                                                                        required>
                                                                                        <option selected disabled>
                                                                                            ---------Select---------
                                                                                        </option>
                                                                                        <option
                                                                                            *ngFor="let i of institution"
                                                                                            [value]="i.id">
                                                                                            {{i.institution}}
                                                                                        </option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>

                                                                            <!-- field Effective Date-->
                                                                            <div class="form-group col-sm-4">
                                                                                <label for="effectiveDate"
                                                                                    class="col-sm-6">Effective
                                                                                    Date*</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="date"
                                                                                        class="form-control"
                                                                                        id="effectiveDate"
                                                                                        name="effectiveDate"
                                                                                        [(ngModel)]="editedDataAcademic.effectiveDate"
                                                                                        required
                                                                                        #effectiveDate="ngModel">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary"
                                                                        (click)="modalRef.hide()">Cancel</button>
                                                                    <button type="button" class="btn btn-primary"
                                                                        (click)="updateAcademic(a.id, editedDataAcademic)">Update</button>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <!-- end of edit form popup-->
                                                    </div>
                                                    <div class="text-right py-2">
                                                        <button type="button" (click)="openDelete(deleteConfirmation)">
                                                            <span class="fa fa-trash"></span></button>

                                                        <!-- delete confirmation pop up-->
                                                        <ng-template #deleteConfirmation>
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h4 class="modal-title pull-left">Delete</h4>
                                                                    <button type="button" class="close pull-right"
                                                                        aria-label="Close" (click)="modalRef.hide()">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    Do you really want to delete this record?
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary"
                                                                        (click)="modalRef.hide()">Cancel</button>
                                                                    <button type="button" class="btn btn-primary"
                                                                        (click)="deleteAcademic(a.id)">Delete</button>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                    </div>
                                                </div>
                                                <!-- end of delete confirmation popup-->
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!--certficate list div-->
                            <div class="col-sm-3">
                                <div class="certificate-list">
                                    <p>Academic Certificates</p>
                                    <div class="certificate-list-name">

                                        <p *ngIf="counsellingAcademic">
                                            <a href= '{{base_url}}/api/counselling/files/educational/{{initialApplicantId.toString()}}'>{{initialApplicantId}}_academic</a>
                                        </p>

                                        <p *ngFor="let certificate of certificatesAcademic">
                                            <a href= "{{base_url}}/api/file/download/s3bucket/{{certificate.id}}_academic.pdf">{{certificate.certificateName}}</a>
                                            <button type="button" (click)="deleteCertificatesAcademic(certificate.id)"
                                                class="remove">
                                                <span class="fa fa-close"></span></button>
                                        </p>

                                    </div>
                                </div> <!-- end of certificate list class-->
                            </div>

                        </div>
                        <!-- submit buttons-->
                        <div class="row " id="button-group">
                            <div class="col-12 text-right py-2">
                                <button type="reset" class="btn btn-sm btn-reset">Reset</button>
                                <button type="button" class="btn btn-sm btn-main" [routerLink]="['/home']">Save
                                    & Exit</button>
                            </div>
                        </div>

                    </form>
                </div>
            </div><!-- end of form class-->

            <!-- end of qualification list table class-->

        </div>
    </div>
</div>
<!-- end of qualification class-->

<!------------------------pop up------------------->
<!-- delete successful msg-->
<ng-template #deleteok>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Message</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        Record is successfully deleted.
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modalRef.hide()">OK</button>
    </div>
</ng-template>

<!-- edit sucessful msg-->
<ng-template #editok>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Message</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        Record is edited successfully.
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modalRef.hide()">OK</button>
    </div>
</ng-template>

<!-- fill mandatory-->
<ng-template #fillMandatory>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Message</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="fillRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        Please fill the mandatory fields.
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="fillRef.hide()">OK</button>
    </div>
</ng-template>

<!-- Save sucessfull msg-->
<ng-template #saveSucessful>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Message</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="sucessRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        Saved successfully
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="sucessRef.hide()">OK</button>
    </div>
</ng-template>

<!-- upload pdf files -->
<ng-template #pdfOnly>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Message</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="fillRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        Accepted Pdf file format only
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="pdf.hide()">OK</button>
    </div>
</ng-template>