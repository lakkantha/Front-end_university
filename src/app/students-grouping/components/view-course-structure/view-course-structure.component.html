<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="Content-wrapper col-sm-11 mx-auto">
                <div class="Content-wrapper col-sm-8 mx-auto">
                    <form class="form-horizontal" [formGroup]="form" (ngSubmit)="search()">
                        <div class="">
                            <div class="header">
                                <h1 class="header-text text-center">View Course structure</h1>
                            </div>
                            <div class="col-sm-12 mx-auto">
                                <div class="form-group row">
                                    <label for="programmeId" class="col-sm-5 col-form-label">Enter Programme<b style="color: red;">*</b></label>
                                    <div class="col-sm-5">
                                        <select class="form-control-sm form-control input-type col-sm-10" name="programmeId" formControlName="programmeId" (change)="getDataBasedOnProgram($event.target.value)">
                                            <option value="" disabled hidden selected>----------Select----------</option>
                                            <option *ngFor="let c of programs" value="{{c.programId}}">{{c.title}}</option>
                                         </select>
                                    </div>
                                    <span class="text-danger" *ngIf="f.programmeId.touched && f.programmeId.invalid">
                                        <div *ngIf="f.programmeId.errors.required">Programme is required.</div>
                                    </span>
                                </div>

                                <div class="form-group row">
                                    <label for="specializationId" class="col-sm-5 col-form-label">Specialization/Discipline/Stream</label>
                                    <div class="col-sm-5">
                                        <select class="form-control-sm form-control input-type col-sm-10" name="specializationId" formControlName="specializationId">
                                            <option value="" disabled hidden selected>----------Select----------</option>
                                            <option *ngFor="let s of specializations" value="{{s.specilization.id}}">{{s.specilization.description}}</option>
                                            <option *ngFor="let s of disciplines" value="{{s.discipline.id}}">{{s.discipline.description}}</option>
                                            <option *ngFor="let s of streams" value="{{s.stream.id}}">{{s.stream.description}}</option>
                                         </select>
                                    </div>
                                    <span class="text-danger" *ngIf="f.specializationId.touched && f.specializationId.invalid">
                                        <div *ngIf="f.specializationId.errors.required">Specialization/Discipline/Stream is required.</div>
                                    </span>
                                </div>

                                <div class="form-group row">
                                    <label for="academicYear" class="col-sm-5 col-form-label">Academic Year</label>
                                    <div class="col-sm-5">
                                        <select class="form-control-sm form-control input-type col-sm-10" name="academicYear" formControlName="academicYear">
                                            <option value="" disabled hidden selected>----------Select----------</option>
                                            <option *ngFor="let academicYear of academicYears" value="{{academicYear.id}}">{{academicYear.year}}</option>
                                         </select>
                                    </div>
                                    <span class="text-danger" *ngIf="f.academicYear.touched && f.academicYear.invalid">
                                        <div *ngIf="f.academicYear.errors.required">Academic Year is required.</div>
                                    </span>
                                </div>

                                <div class="form-group row">
                                    <label for="courseId" class="col-sm-5 col-form-label">Enter Course<b style="color: red;">*</b></label>
                                    <div class="col-sm-5">
                                         <select class="form-control-sm form-control input-type col-sm-10" name="courseId" formControlName="courseId">
                                          <option value="" disabled hidden selected>----------Select----------</option>
                                          <option *ngFor="let c of courses" value="{{c.id}}">{{c.code}}</option>
                                       </select>
                                    </div>
                                    <span class="text-danger" *ngIf="f.courseId.touched && f.courseId.invalid">
                                        <div *ngIf="f.courseId.errors.required">Course is required.</div>
                                    </span>
                                </div>

                                <div class="form-group row">
                                    <label for="specialization" class="col-sm-5 col-form-label">Effected Exam Type<b style="color: red;">*</b></label>
                                    <div class="col-sm-5">
                                        <select class="form-control-sm form-control input-type col-sm-10" name="effectedExamType" formControlName="effectedExamType">
                                            <option value="" disabled hidden selected>----------Select----------</option>
                                            <option value="byExamResult">By Exam Result</option>
                                         </select>
                                    </div>
                                    <span class="text-danger" *ngIf="f.effectedExamType.touched && f.effectedExamType.invalid">
                                        <div *ngIf="f.effectedExamType.errors.required">Effected Exam Type is required.</div>
                                    </span>
                                </div>

                                <div class="form-group row">
                                    <label for="specialization" class="col-sm-5 col-form-label">Add Component<b style="color: red;">*</b></label>
                                    <div class="col-sm-5">
                                        <select class="form-control-sm form-control input-type col-sm-10" name="addComponent" formControlName="addComponent">
                                            <option value="" disabled hidden selected>----------Select----------</option>
                                            <option value="byExamResult">By Exam Result</option>
                                         </select>
                                    </div>
                                    <span class="text-danger" *ngIf="f.addComponent.touched && f.addComponent.invalid">
                                        <div *ngIf="f.addComponent.errors.required">Add Component is required.</div>
                                    </span>
                                </div>

                                <div class="row" style="padding: 5px">
                                    <div class="col-sm-12 text-right">
                                        <button type="submit" class="btn btn-main btn-sm" [disabled]="!form.valid">Search</button>&nbsp;&nbsp;&nbsp;
                                        <button type="reset" class="btn btn-reset btn-sm">Clear</button>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </form>
                </div>

                <br>
                <div class="Content-wrapper col-sm-12 mx-auto" id="table">
                    <div class="table" style="overflow-x:auto; scroll-behavior: auto;">
                        <table class="table table-bordered table-striped text-center">
                            <thead>
                                <tr>
                                    <th>Course</th>
                                    <th>Effected exam type</th>
                                    <th>Component</th>
                                    <th>Group able status</th>
                                    <th>Offering semester</th>
                                    <th>Element</th>
                                    <th>Session</th>
                                    <th>Value of centre</th>
                                    <th>Edit</th>
                                    <th>Delete</th>
                                 </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let myProgram of myPrograms ; let i = index ">
                                    <td>{{i}}</td>   
                                    <td>{{myPrograms[myPrograms.length-((myPrograms.length-i)%myPrograms.length)-1].component !== myProgram.component || i===0 ? myProgram.examType : ''}}</td> 
                                    <td>{{myPrograms[myPrograms.length-((myPrograms.length-i)%myPrograms.length)-1].component !== myProgram.component || i===0 ? myProgram.component : ''}}</td>
                                    <td>{{(myPrograms[myPrograms.length-((myPrograms.length-i)%myPrograms.length)-1].Element !== myProgram.Element) || ((myPrograms[myPrograms.length-((myPrograms.length-i)%myPrograms.length)-1].component !== myProgram.component))  || i===0  ? myProgram.status : ''}}</td>
                                    <td>{{(myPrograms[myPrograms.length-((myPrograms.length-i)%myPrograms.length)-1].Element !== myProgram.Element) || ((myPrograms[myPrograms.length-((myPrograms.length-i)%myPrograms.length)-1].component !== myProgram.component))  || i===0  ? myProgram.semester : ''}}</td>   
                                    <td>{{myPrograms[myPrograms.length-((myPrograms.length-i)%myPrograms.length)-1].Element !== myProgram.Element || i===0 ? myProgram.Element : ''}}</td> 
                                    <td>{{myProgram.Session}}</td>
                                    <td>{{myProgram.centre}}</td>
                                    <td><i class="fa fa-edit" (click)="editComponentCourse(myProgram.id)" ></i></td>
                                    <td><i class="fa fa-trash" (click)="deleteComponentCourse(myProgram.id)" [hidden]='!(myPrograms[myPrograms.length-((myPrograms.length-i)%myPrograms.length)-1].component !== myProgram.component || i===0 )'></i></td>
                                </tr> 
                            </tbody>                                    
                        </table>
                    </div>
                    <div class="row" style="padding: 5px">
                        <div class="col-sm-12 text-right">
                            <button type="submit" class="btn btn-main btn-sm" (click)="getPDF()">Download</button>&nbsp;&nbsp;&nbsp;
                            <button class="btn btn-reset btn-sm" (click)="exit()" >Exit</button>
                        </div>
                    </div>
                </div>

                <br>
            </div>
        </div>
    </div>
</div>




